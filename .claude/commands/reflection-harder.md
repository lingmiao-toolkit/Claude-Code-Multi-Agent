---
description: 全面的会话分析和学习捕获
argument-hint: none
allowed-tools: Read, Write, TodoWrite, Bash(git:*)
---

您是分析开发会话和优化AI-人类协作的专家。您的任务是反思今天的工作会话并提取将改善未来交互的学习内容。

## 会话分析阶段

审查整个对话历史并识别：

### 1. 问题与解决方案

- **我们遇到了什么问题？**
  - 用户报告的初始症状
  - 发现的根本原因
  - 实施的解决方案
  - 学到的关键洞察

### 2. 代码模式与架构

- **出现了什么模式？**
  - 做出的设计决策
  - 架构选择
  - 发现的代码关系
  - 识别的集成点

### 3. 用户偏好与工作流

- **用户喜欢如何工作？**
  - 沟通风格
  - 决策模式
  - 质量标准
  - 工作流偏好
  - 揭示偏好的直接引用

### 4. 系统理解

- **我们对系统学到了什么？**
  - 组件交互
  - 关键路径和依赖关系
  - 失败模式和恢复
  - 性能考虑

### 5. 知识差距与改进

- **我们可以在哪里改进？**
  - 发生的误解
  - 缺失的信息
  - 发现的更好方法
  - 未来考虑

## 反思输出阶段

按以下格式构建您的反思：

  <session_overview>

- 日期: [今天的日期]
- 主要目标: [我们要做什么]
- 结果: [完成了什么]
- 投入时间: [大概持续时间]
  </session_overview>

  <problems_solved>
  [对于每个主要问题:]
  问题: [名称]

- 用户体验: [用户看到/体验到的]
- 技术原因: [为什么发生]
- 应用的解决方案: [我们做了什么]
- 关键学习: [对未来的重要洞察]
- 相关文件: [涉及的关键文件]
  </problems_solved>

  <patterns_established>
  [对于每个模式:]

- 模式: [名称和描述]
- 示例: [具体代码/命令]
- 何时应用: [情况]
- 为什么重要: [对系统的影响]
  </patterns_established>

  <user_preferences>
  [对于每个发现的偏好:]

- 偏好: [用户偏好什么]
- 证据: "[用户的直接引用]"
- 如何应用: [具体实施]
- 优先级: [高/中/低]
  </user_preferences>

  <system_relationships>
  [对于每个关系:]

- 组件A → 组件B: [交互描述]
- 触发器: [什么导致交互]
- 效果: [发生什么]
- 监控: [如何观察它]
  </system_relationships>

  <knowledge_updates>

## CLAUDE.md的更新

  [应添加到项目记忆的关键点:]

- [要点1]
- [要点2]

## 需要的代码注释

  [注释有助于未来理解的地方:]

- 文件: [路径] - 解释: [需要澄清什么]

## 文档改进

  [应添加到README或文档的内容:]

- 主题: [要记录什么]
- 位置: [在哪里添加]
  </knowledge_updates>

  <commands_and_tools>

## 发现的有用命令

- `[命令]`: [它做什么以及何时使用]

## 关键文件位置

- [路径]: [它包含什么以及为什么重要]

## 调试工作流

- 当[X]发生时: [逐步方法]
  </commands_and_tools>

  <future_improvements>

## 下次会话

- 记住: [重要点]
- 注意: [潜在问题]
- 考虑: [替代方法]

## 建议的增强

- 工具/命令: [可以改进什么]
- 工作流: [如何优化]
- 文档: [缺少什么]
  </future_improvements>

  <collaboration_insights>

## 更好地协作

- 沟通: [什么效果好]
- 效率: [如何节省时间]
- 理解: [如何澄清需求]
- 信任: [哪里适合自主性]
  </collaboration_insights>

## 行动项目

  [此反思后应该做什么:]

  1. 更新CLAUDE.md: [具体部分]
  2. 为以下添加注释: [具体文件]
  3. 为以下创建文档: [具体主题]
  4. 测试: [需要验证什么]

  记住：目标是建立累积知识，使每次会话都比上次更有效。专注于将适用于未来工作的模式、偏好和系统理解。
